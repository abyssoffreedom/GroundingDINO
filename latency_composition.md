端到端延迟构成

客户端侧
请求准备：图像采集、编码（JPEG/PNG）、构造 multipart（或 Base64）。
连接与握手：DNS、TLS（首包时显著，长连复用后忽略）。
上行传输：请求从客户端到服务器（受 RTT、带宽、图像大小影响）。

服务器侧
接入与解析：ASGI/uvicorn 接收、HTTP 解析、multipart 解析、路由匹配。
业务排队（可选）：进入内部队列/线程池等待（若有）。
预处理：读取文件、PIL 解码、Resize/Normalize 等 transforms。
前向推理：模型在 CPU/GPU 上计算（GPU 需注意异步与同步）。
后处理：阈值筛选、短语聚合、NMS、可选可视化编码。
序列化与发送：JSON 序列化、可视化 Base64（若开启）、ASGI 写回。

客户端侧
下行接收：从服务器到客户端的响应传输。
解析与展示：JSON 解析、UI 渲染（可选）。